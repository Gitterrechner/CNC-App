<!DOCTYPE html>
<html lang="de">
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>CNC Helfer</title>

<link rel="manifest" href="manifest.json">

<style>

body{
margin:0;
font-family:-apple-system,BlinkMacSystemFont,"Segoe UI";
background:#eef1f5;
}

.container{
max-width:750px;
margin:auto;
padding:20px;
}

.card{
background:white;
padding:20px;
border-radius:18px;
box-shadow:0 10px 25px rgba(0,0,0,0.08);
margin-bottom:20px;
}

input,select{
width:100%;
padding:14px;
margin-top:10px;
border-radius:12px;
border:1px solid #d0d6dc;
font-size:18px;
}

button{
width:100%;
padding:16px;
margin-top:15px;
border:none;
border-radius:14px;
background:#007AFF;
color:white;
font-size:20px;
font-weight:bold;
}

.result{
margin-top:15px;
font-size:18px;
font-weight:bold;
}

.hidden{display:none;}

.diagram{
background:#f7f9fb;
padding:10px;
border-radius:12px;
margin-top:10px;
font-size:14px;
}

</style>
</head>

<body>

<div class="container">

<h1>CNC Helfer</h1>

<!-- LOGIN -->

<div id="loginBox" class="card">
<h2>üîê Passwort</h2>
<input id="password" type="password">
<button onclick="login()">Login</button>
</div>

<!-- APP -->

<div id="app" class="hidden">

<div class="card">

<h2>Bohren / Gewinde</h2>

<select id="mode">
<option value="grid">Gitter</option>
<option value="circle">Lochkreis</option>
</select>

<select id="process">
<option value="bohren">Bohren</option>
<option value="gewinde">Gewinde</option>
</select>

</div>


<div class="card">

<h3>Parameter</h3>

<input id="x" placeholder="X L√§nge">
<input id="y" placeholder="Y L√§nge">

<input id="diameter" placeholder="Werkzeug / Gewinde √ò">

<input id="pitch" placeholder="Steigung / Steg">

<input id="workpiece" placeholder="Werkst√ºck √ò (nur Lochkreis)">

<button onclick="calc()">Berechnen</button>

<div class="result" id="result"></div>

<div class="diagram">

<b>Erkl√§rung:</b><br><br>

<b>X / Y</b> = Bauteilgr√∂√üe<br>
<b>Achsabstand</b> = Mitte zu Mitte<br>
<b>Raster</b> = Werkzeug + Steg / Gewinde + Abstand<br><br>

<b>Lochkreis:</b><br>
Radius = Werkst√ºck / 2<br>
Winkelschritt = 360¬∞ / Anzahl

</div>

</div>

</div>

</div>


<script>

// SERVICE WORKER
if ('serviceWorker' in navigator) {
navigator.serviceWorker.register('service-worker.js');
}


// LOGIN MIT SPEICHER

const PASS="cnc123";

if(localStorage.getItem("logged")=="yes"){
loginBox.style.display="none";
app.classList.remove("hidden");
}

function login(){

if(password.value===PASS){

localStorage.setItem("logged","yes");

loginBox.style.display="none";
app.classList.remove("hidden");

}
}



// CNC RECHNER

function calc(){

let mode=document.getElementById("mode").value;
let process=document.getElementById("process").value;

let x=parseFloat(document.getElementById("x").value);
let y=parseFloat(document.getElementById("y").value);
let dia=parseFloat(document.getElementById("diameter").value);
let pitch=parseFloat(document.getElementById("pitch").value);
let wp=parseFloat(document.getElementById("workpiece").value);

if(process==="gewinde"){
pitch=pitch*(2); // default formen
}

let raster=dia+pitch;

if(mode==="grid"){

let cx=Math.floor(x/raster);
let cy=Math.floor(y/raster);

let sx=(x-(cx-1)*raster)/2;
let sy=(y-(cy-1)*raster)/2;

result.innerHTML=`
Raster: ${raster.toFixed(2)} mm<br>
X: ${cx} | Y: ${cy}<br>
Start X: ${sx.toFixed(2)}<br>
Start Y: ${sy.toFixed(2)}
`;

}else{

let radius=wp/2;
let umfang=2*Math.PI*radius;

let count=Math.floor(umfang/raster);
let angle=360/count;

result.innerHTML=`
Radius: ${radius.toFixed(2)} mm<br>
Anzahl: ${count}<br>
Winkelschritt: ${angle.toFixed(2)}¬∞
`;

}

}

</script>

</body>
</html>
