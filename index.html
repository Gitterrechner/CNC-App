<!DOCTYPE html>
<html lang="de">
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>CNC Helfer</title>

<style>

body{
margin:0;
font-family:-apple-system,BlinkMacSystemFont,"Segoe UI";
background:#eef1f5;
}

.container{
max-width:750px;
margin:auto;
padding:20px;
}

.card{
background:white;
padding:20px;
border-radius:18px;
box-shadow:0 10px 25px rgba(0,0,0,0.08);
margin-bottom:20px;
}

button{
width:100%;
padding:18px;
margin-top:10px;
border:none;
border-radius:14px;
background:#007AFF;
color:white;
font-size:20px;
font-weight:bold;
}

.menuBtn{
background:#34C759;
}

.back{
background:#999;
}

input,select{
width:100%;
padding:14px;
margin-top:10px;
border-radius:12px;
border:1px solid #d0d6dc;
font-size:18px;
}

.result{
margin-top:15px;
font-size:18px;
font-weight:bold;
}

.hidden{display:none;}

.diagram{
background:#f7f9fb;
padding:10px;
border-radius:12px;
margin-top:10px;
font-size:14px;
}

</style>
</head>

<body>

<div class="container">

<h1>CNC Helfer</h1>

<!-- LOGIN -->

<div id="loginBox" class="card">
<h2>üîê Passwort</h2>
<input id="password" type="password">
<button onclick="login()">Login</button>
</div>

<!-- APP -->

<div id="app" class="hidden">

<!-- HAUPTMEN√ú -->

<div id="mainMenu" class="card">

<button class="menuBtn" onclick="openPage('bohrenMenu')">
üõ† Bohren
</button>

<button class="menuBtn" onclick="openPage('gewindeMenu')">
üî© Gewinden
</button>

</div>


<!-- BOHREN MENU -->

<div id="bohrenMenu" class="hidden card">

<button class="back" onclick="goBack()">‚Üê Zur√ºck</button>

<button onclick="openPage('bohrGrid')">Gitter</button>
<button onclick="openPage('bohrCircle')">Lochkreis</button>

</div>


<!-- GEWINDE MENU -->

<div id="gewindeMenu" class="hidden card">

<button class="back" onclick="goBack()">‚Üê Zur√ºck</button>

<button onclick="openPage('gewindeGrid')">Gitter</button>
<button onclick="openPage('gewindeCircle')">Lochkreis</button>

</div>



<!-- BOHR GITTER -->

<div id="bohrGrid" class="hidden card">

<button class="back" onclick="goBack()">‚Üê Zur√ºck</button>

<h3>Bohrgitter</h3>

<input id="bx" placeholder="X L√§nge">
<input id="by" placeholder="Y L√§nge">
<input id="btool" placeholder="Werkzeug √ò">
<input id="bsteg" placeholder="Steg">

<button onclick="calcBohrGrid()">Berechnen</button>

<div class="result" id="bohrGridResult"></div>

<div class="diagram">
Achsabstand = Werkzeug + Steg<br>
Startpunkt = automatisch zentriert
</div>

</div>



<!-- BOHR LOCHKREIS -->

<div id="bohrCircle" class="hidden card">

<button class="back" onclick="goBack()">‚Üê Zur√ºck</button>

<h3>Bohrlochkreis</h3>

<input id="bd" placeholder="Werkst√ºck √ò">
<input id="btool2" placeholder="Werkzeug √ò">
<input id="bsteg2" placeholder="Steg">

<button onclick="calcBohrCircle()">Berechnen</button>

<div class="result" id="bohrCircleResult"></div>

</div>



<!-- GEWINDE GITTER -->

<div id="gewindeGrid" class="hidden card">

<button class="back" onclick="goBack()">‚Üê Zur√ºck</button>

<h3>Gewindegitter</h3>

<select id="threadMethod">
<option value="1">Schneiden (1x Steigung)</option>
<option value="2">Formen (2x Steigung)</option>
<option value="custom">Freie Steigung</option>
</select>

<input id="gx" placeholder="X L√§nge">
<input id="gy" placeholder="Y L√§nge">
<input id="gdia" placeholder="Gewinde √ò">
<input id="gpitch" placeholder="Steigung">

<button onclick="calcGewindeGrid()">Berechnen</button>

<div class="result" id="gewindeGridResult"></div>

</div>



<!-- GEWINDE LOCHKREIS -->

<div id="gewindeCircle" class="hidden card">

<button class="back" onclick="goBack()">‚Üê Zur√ºck</button>

<h3>Gewinde Lochkreis</h3>

<select id="threadMethod2">
<option value="1">Schneiden</option>
<option value="2">Formen</option>
<option value="custom">Freie Steigung</option>
</select>

<input id="gcd" placeholder="Werkst√ºck √ò">
<input id="gcdia" placeholder="Gewinde √ò">
<input id="gcpitch" placeholder="Steigung">

<button onclick="calcGewindeCircle()">Berechnen</button>

<div class="result" id="gewindeCircleResult"></div>

</div>

</div>

</div>



<script>

// LOGIN
const PASS="bernd";

if(localStorage.getItem("logged")=="yes"){
loginBox.style.display="none";
app.classList.remove("hidden");
}

function login(){
if(password.value===PASS){
localStorage.setItem("logged","yes");
loginBox.style.display="none";
app.classList.remove("hidden");
}
}


// NAVIGATION

function openPage(id){

document.querySelectorAll(".card").forEach(c=>{
if(c.id!=="loginBox") c.classList.add("hidden");
});

document.getElementById("app").classList.remove("hidden");
document.getElementById(id).classList.remove("hidden");

}

function goBack(){

document.querySelectorAll(".card").forEach(c=>{
if(c.id!=="loginBox") c.classList.add("hidden");
});

mainMenu.classList.remove("hidden");

}



// BOHR GITTER

function calcBohrGrid(){

let x=parseFloat(bx.value);
let y=parseFloat(by.value);
let tool=parseFloat(btool.value);
let steg=parseFloat(bsteg.value);

let raster=tool+steg;

let cx=Math.floor(x/raster);
let cy=Math.floor(y/raster);

let sx=(x-(cx-1)*raster)/2;
let sy=(y-(cy-1)*raster)/2;

bohrGridResult.innerHTML=`
Raster: ${raster.toFixed(2)} mm<br>
X: ${cx} | Y: ${cy}<br>
Start X: ${sx.toFixed(2)}<br>
Start Y: ${sy.toFixed(2)}
`;

}



// BOHR LOCHKREIS

function calcBohrCircle(){

let d=parseFloat(bd.value);
let tool=parseFloat(btool2.value);
let steg=parseFloat(bsteg2.value);

let raster=tool+steg;
let radius=(d-tool)/2;

let count=Math.floor((2*Math.PI*radius)/raster);
let angle=360/count;

bohrCircleResult.innerHTML=`
Radius: ${radius.toFixed(2)} mm<br>
Bohrungen: ${count}<br>
Winkelschritt: ${angle.toFixed(2)}¬∞
`;

}



// GEWINDE GITTER

function calcGewindeGrid(){

let method=threadMethod.value;

let x=parseFloat(gx.value);
let y=parseFloat(gy.value);
let dia=parseFloat(gdia.value);
let pitch=parseFloat(gpitch.value);

if(method==="2") pitch*=2;

let raster=dia+pitch;

let cx=Math.floor(x/raster);
let cy=Math.floor(y/raster);

let sx=(x-(cx-1)*raster)/2;
let sy=(y-(cy-1)*raster)/2;

gewindeGridResult.innerHTML=`
Achsabstand: ${raster.toFixed(2)} mm<br>
X: ${cx} | Y: ${cy}<br>
Start X: ${sx.toFixed(2)}<br>
Start Y: ${sy.toFixed(2)}
`;

}



// GEWINDE LOCHKREIS

function calcGewindeCircle(){

let method=threadMethod2.value;

let d=parseFloat(gcd.value);
let dia=parseFloat(gcdia.value);
let pitch=parseFloat(gcpitch.value);

if(method==="2") pitch*=2;

let raster=dia+pitch;
let radius=d/2;

let count=Math.floor((2*Math.PI*radius)/raster);
let angle=360/count;

gewindeCircleResult.innerHTML=`
Radius: ${radius.toFixed(2)} mm<br>
Gewinde: ${count}<br>
Winkelschritt: ${angle.toFixed(2)}¬∞
`;

}

</script>

</body>
</html>
